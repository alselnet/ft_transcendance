(()=>{"use strict";const n=()=>{let n=document.createElement("nav");return n.innerHTML='\n        <a href="#/">Home</a>\n        <a href="#/inscription">Inscription</a>\n        <a href="#/connexion">Connexion</a>\n        <a href="#/jeu">Jeu</a>\n        <a href="#/dashboard">Dash</a>\n\n        <nav class="navbar-container">\n            <div class="container-fluid">\n                <div class="myNavbar d-none d-lg-flex">\n                    <a class="nav-link" href="#/jeu"><i class="bi bi-controller" style="font-size: 4rem; color: white;"></i></a>\n                    <a class="nav-link" href="#/dashboard"><i class="bi bi-person-fill" style="font-size: 3rem; color: white;"></i></a>\n                    <a class="nav-link" href="#/settings"><i class="bi bi-gear-fill" style="font-size: 3rem; color: white;"></i></a>\n                    <a class="nav-link" href="#/aboutus"><i class="bi bi-info-circle" style="font-size: 3rem; color: white;"></i></a>\n                </div>\n            </div>\n        </nav>\n    ',window.addEventListener("hashchange",e),e(),n},e=()=>{document.querySelectorAll(".nav-link").forEach((n=>{n.classList.remove("active")}));const n=location.hash,e=document.querySelector(`.nav-link[href="${n}"]`);e&&e.classList.add("active")},t=()=>{let n=document.createElement("main");return n.id="section",n},s=()=>{console.log("Login component loaded");let n=document.querySelector("#section");n?(n.innerHTML='\n        <div class="balls-login d-none d-sm-flex">\n            <div class="orange-ball-login"></div>\n            <div class="white-ball-login">\n                <div class="login-form-login">\n                    <input type="text" id="username" placeholder="Username">\n                    <input type="password" id="password" placeholder="Password">\n                    <button type="submit" class="button-login">se connecter</button>\n                </div>\n            </div>\n        </div>\n\n        <div class="balls-login balls-sm-login d-lg-none d-sm-flex">\n            <div class="white-ball-sm-login">\n                <div class="login-form-login">\n                    <input type="text" id="username-sm" placeholder="Username">\n                    <input type="password" id="password-sm" placeholder="Password">\n                    <button type="submit" class="button-login">se connecter</button>\n                </div>\n            </div>\n        </div>\n    ',console.log("Section content:",n.innerHTML)):console.error("#section not found in the DOM"),n.addEventListener("submit",(n=>{n.preventDefault();(async n=>{try{const e=await fetch("https://localhost/api/signin/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!e.ok)throw new Error("Erreur de connexion");const t=await e.json();console.log("Réponse du backend:",t),localStorage.setItem("accessToken",t.access),localStorage.setItem("refreshToken",t.refresh);const s=await fetch("https://localhost/api/csrf_token",{method:"GET",credentials:"include"});if(!s.ok)throw new Error("Erreur lors de la récupération du token CSRF");const a=await s.json();document.cookie=`csrftoken=${a.token};path=/`,window.location.href="#/dashboard"}catch(n){console.error("Erreur:",n),alert("Nom d utilisateur ou mot de passe incorrect")}})({username:document.getElementById("username").value,password:document.getElementById("password").value})}))},a=n=>{fetch("http://localhost:8000/api/register/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((n=>n.ok?n.json():n.json().then((n=>{throw new Error(n)})))).then((n=>{alert("User created successfully."),window.location.href="/myprofile"})).catch((n=>{alert("User creation failed."),console.error("Error:",n)}))},i=()=>{console.log("Leaderboard component loaded");let n=document.querySelector("#section");if(n){n.innerHTML='\n        <div class="container-ldb">\n            <h1 class="title-ldb">Leaderboard</h1>\n            <div class="frame-ldb">\n                <a class="nav-link" href="#/dashboard"><span class="close-btn-ldb">&times;</span></a>\n                <div class="podium-ldb">\n                    <div class="second-ldb">\n                        <p class="two-ldb">2</p>\n                    </div>\n                    <div class="first-ldb">\n                        <p class="one-ldb">1</p>\n                    </div>\n                    <div class="third-ldb">\n                        <p class="three-ldb">3</p>\n                    </div>\n                </div>\n\n                <div class="leaderboard-list-ldb">\n                    <div class="profil-ldb">\n                        <div class="rank-ldb">4.</div>\n                        <div class="profile-picture-ldb"><img src="./app/images/tmejri_avatar.png" alt="jcointre"></div>\n                        <div class="username-ldb">Jcointre</div>\n                        <div class="score-ldb">1234 pts</div>\n                    </div>\n                    <div class="profil-ldb">\n                        <div class="rank-ldb">5.</div>\n                        <div class="profile-picture-ldb"><img src="./app/images/jecointr_avatar.png" alt="jcointre"></div>\n                        <div class="username-ldb">Tmejri</div>\n                        <div class="score-ldb">1233 pts</div>\n                    </div>\n                    <div class="profil-ldb">\n                        <div class="rank-ldb">6.</div>\n                        <div class="profile-picture-ldb"><img src="./app/images/jecointr_avatar.png" alt="jcointre"></div>\n                        <div class="username-ldb">Jcointre</div>\n                        <div class="score-ldb">1232 pts</div>\n                    </div>\n                    <div class="profil-ldb">\n                        <div class="rank-ldb">7.</div>\n                        <div class="profile-picture-ldb"><img src="./app/images/tmejri_avatar.png" alt="jcointre"></div>\n                        <div class="username-ldb">Tmejri</div>\n                        <div class="score-ldb">1231 pts</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        ',console.log("Section content:",n.innerHTML);const e=document.querySelector(".container-ldb");e&&setTimeout((()=>{e.classList.add("animate-ldb")}),0)}else console.error("#section not found in the DOM")},o=()=>{if(!(()=>{const n=localStorage.getItem("accessToken");if(!n)return window.location.href="#/connexion",!1;{const e=1e3*JSON.parse(atob(n.split(".")[1])).exp;if(Date.now()>=e)return localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="#/connexion",!1}return!0})())return;let e=document.querySelector("#root");e.innerHTML="",e.append(n()),e.append(t());let s=document.createElement("div");s.className="dashboard-container",s.append((()=>{let n=document.createElement("div");return n.innerHTML='\n    <div class="left-side-stat">\n        <div class="id-stat">\n            <div><img src="./app/images/tmejri_avatar.png" alt="profile-pic" class="profile-picture-stat"></div>\n            <div class="text-stat">\n                <div class="username-stat">Tmejri</div>\n                <div class="status-stat">\n                    <div class="pastille-stat"></div>\n                    <div class="status-text-stat">en ligne</div>\n                    <div class="icon-settings-stat"><i class="bi bi-gear-fill-stat" style="font-size: 1.5rem; color: white;"></i></div>\n                </div>\n            </div>\n        </div>\n \n        <div class="statistics-stat">\n            <div class="left-side-stat-stat">\n                <div class="stat-title-stat">Statistiques du joueur :</div>\n                <div class="camambert-stat"></div>\n            </div>\n            <div class="right-side-stat-stat">\n                <div class="stat-data-stat">\n                    <div class="stat-rubric-stat">\n                        <p class="stat-text-stat">Partie(s) jouée(s)</p>\n                        <p class="stat-number-stat" data-target="7">0</p>\n                    </div>\n                    <div class="stat-rubric-stat">\n                        <p class="stat-text-stat">Adversaire(s) rencontré(s)</p>\n                        <p class="stat-number-stat" data-target="6">0</p>\n                    </div>\n                    <div class="stat-rubric-stat">\n                        <p class="stat-text-stat">Temps de jeu (s)</p>\n                        <p class="stat-number-stat" data-target="124">0</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="friends-and-leaderboard-stat">\n            <a class="nav-link" href="#/leaderboard">\n                <div class="leaderboard-stat" id="leaderboard-stat">\n                    <i class="bi bi-trophy-fill trophy-icon"></i>\n                    <p class="leader-text-stat">Leaderboard</p>\n                </div>\n            </a>\n            <div class="friends-list-stat">\n                <i class="bi bi-list-task" style="font-size: 3rem; color: white;"></i>\n                <p class="list-text-stat">Liste d\'amis</p>\n            </div>\n        </div>\n    </div>\n    ',setTimeout((()=>{n.querySelectorAll(".stat-number-stat").forEach((n=>{const e=+n.getAttribute("data-target");((n,e)=>{let t=0;const s=e/200,a=setInterval((()=>{t+=s,t>=e&&(clearInterval(a),t=e),n.textContent=Math.floor(t)}),10)})(n,e)}))}),500),n})()),s.append((()=>{let n=document.createElement("div");return n.innerHTML='\n\t<div class="right-side-history">\n\t\t<div class="history-history">\n\t\t\t<div class="victory-history">\n\t\t\t\t<p class="number-history" data-target="2">0</p>\n\t\t\t\t<p class="text-history">victoire(s)</p>\n\t\t\t</div>\n\t\t\t<div class="defeat-history">\n\t\t\t\t<p class="number-history" data-target="5">0</p>\n\t\t\t\t<p class="text-history">défaite(s)</p>\n\t\t\t</div>\n\t\t\t<p class="game-historic-history">voir l\'historique des parties</p>\n\t\t</div>\n\t</div>\n    ',setTimeout((()=>{n.querySelectorAll(".number-history").forEach((n=>{const e=+n.getAttribute("data-target");((n,e)=>{let t=0;const s=e/200,a=setInterval((()=>{t+=s,t>=e&&(clearInterval(a),t=e),n.textContent=Math.floor(t)}),10)})(n,e)}))}),500),n})()),e.append(s);const a=document.querySelector(".leaderboard-stat .nav-link");a?a.addEventListener("click",(n=>{n.preventDefault();let t=document.createElement("div");t.id="section",e.append(t);const s=a.getBoundingClientRect();t.style.position="absolute",t.style.left=`${s.left}px`,t.style.top=`${s.top}px`,i();const o=t.querySelector(".container-ldb");setTimeout((()=>{t.style.position="relative",t.style.left="0",t.style.top="0",o.classList.remove("leaderboard-hidden"),o.classList.add("leaderboard-visible")}),10)})):console.error("Leaderboard link not found");const o=document.querySelector(".camambert-stat");if(o){const{left:n,top:e}=o.getBoundingClientRect(),t=100,a=n-s.getBoundingClientRect().left,i=e-s.getBoundingClientRect().top;!function(n,e,t,s,a){let i=document.createElement("div");i.style.width=0,i.style.height=0,i.style.left=e+"px",i.style.top=t+"px",i.style.position="absolute",i.style.backgroundColor="green",i.style.borderRadius="50%",i.style.transition="width 0.5s ease, height 0.5s ease",n.append(i),setTimeout((()=>{i.style.width=3*s+"px",i.style.height=3*s+"px",i.addEventListener("transitionend",(function n(){i.removeEventListener("transitionend",n),console.log("Circle animation complete")}))}),0)}(s,a,i,t)}else console.error("camambert-stat element not found")},l=()=>{let n=document.createElement("div");return console.log("Settings component loaded"),section.innerHTML='\n        <div class="container">\n            <h2>SETTINGS</h2>\n            <span class="close-btn">&times;</span>\n            <div class="profile-section">\n                <img src="../images/jecointr_avatar.png" alt="jecointr"> \n                <a href="#" class="edit-link">edit</a>\n            </div>\n            <div class="info-section">\n                <div class="info">\n                    <label class="info-label">NICKNAME :</label>\n                    <input type="text" class="info-input">\n                    <a href="#" class="edit-link">edit</a>\n                </div>\n                <div class="info">\n                    <label class="info-label">PASSWORD :</label>\n                    <input type="password" class="info-input">\n                    <a href="#" class="edit-link">edit</a>\n                </div>\n            </div>\n            <div class="settings-section">\n                <div class="item1">\n                    <div class="setting">\n                        <span class="setting-label">ON</span>\n                        <label class="switch">\n                            <input type="checkbox" checked>\n                            <span class="slider"></span>\n                        </label>\n                        <span class="setting-description">Sound</span>\n                    </div>\n                    <div class="setting">\n                        <span class="setting-label">OFF</span>\n                        <label class="switch">\n                            <input type="checkbox">\n                            <span class="slider"></span>\n                        </label>\n                        <span class="setting-description">Dark mode</span>\n                    </div>\n                </div>\n                <div class="item2">\n                    <div class="setting">\n                        <span class="setting-label">OFF</span>\n                        <label class="switch">\n                            <input type="checkbox">\n                            <span class="slider"></span>\n                        </label>\n                        <span class="setting-description">Music</span>\n                    </div>\n                    <div class="setting">\n                        <span class="setting-label">OFF</span>\n                        <label class="switch">\n                            <input type="checkbox">\n                            <span class="slider"></span>\n                        </label>\n                        <span class="setting-description">Mode secret</span>\n                    </div>\n                </div>\n            </div>\n            <div class="color-theme">\n                <span>Color theme</span>\n                <label class="switch">\n                    <input type="checkbox">\n                    <span class="slider red"></span>\n                </label>\n            </div>\n        </div>\n        ',n},r=()=>{let e=document.getElementById("root");e?(e.innerHTML="",e.append(n()),e.append(t()),(()=>{let{hash:n}=location,e=document.getElementById("section");if(e)switch(n){case"#/":(()=>{console.log("Home component loaded");let n=document.querySelector("#section");if(n){function e(n){for(let e=0,t=1;;e+=t,t/=2)if(n>=(7-4*e)/11)return-Math.pow((11-6*e-11*n)/4,2)+Math.pow(t,2)}function t(n){return function(e){return 1-n(1-e)}}function s({timing:n,draw:e,duration:t}){let s=performance.now();requestAnimationFrame((function a(i){let o=(i-s)/t;o>1&&(o=1);let l=n(o);e(l),o<1&&requestAnimationFrame(a)}))}n.innerHTML='\n        <div class="balls-home d-none d-sm-flex">\n            <div class="orange-ball-home">\n                <a href="#/inscription" data-hash="inscription">\n                    <span>I</span>\n                    <span>n</span>\n                    <span>s</span>\n                    <span>c</span>\n                    <span>r</span>\n                    <span>i</span>\n                    <span>p</span>\n                    <span>t</span>\n                    <span>i</span>\n                    <span>o</span>\n                    <span>n</span>\n                </a>\n            </div>\n            <div class="white-ball-home">\n                <a href="#/connexion" data-hash="connexion">\n                    <span>c</span>\n                    <span>o</span>\n                    <span>n</span>\n                    <span>n</span>\n                    <span>e</span>\n                    <span>x</span>\n                    <span>i</span>\n                    <span>o</span>\n                    <span>n</span>\n                </a>\n            </div>\n            <div class="btn-container-home">\n                <button onclick="window.location=\'https://42.fr/\';" class="btn-42-home">\n                    <p class="co-42-home">connexion avec</p>\n                    <img src="./app/images/42.png" class="img-42-home" alt="button-42">\n                </button>\n            </div>\n        </div>\n    ',console.log("Section content:",n.innerHTML);const a=document.querySelector(".white-ball-home"),i=document.querySelector(".orange-ball-home");if(a&&i){a.style.position="absolute",i.style.position="absolute",a.style.top="0",i.style.top="0";const o=(n.clientHeight-a.clientHeight)/3,l=(n.clientHeight-i.clientHeight)/3;s({duration:2e3,timing:t(e),draw(n){a.style.transform=`translateY(${o*n}px)`}}),setTimeout((()=>{s({duration:2e3,timing:t(e),draw(n){i.style.transform=`translateY(${l*n}px)`}})}),1e3)}else console.error(".white-ball-home or .orange-ball-home not found in the DOM")}else console.error("#section not found in the DOM")})();break;case"#/inscription":(()=>{console.log("SignIn component loaded");let n=document.querySelector("#section");n?(n.innerHTML='\n    <div class="balls-signin d-none d-sm-flex">\n        <div class="white-ball-signin"></div>\n        <div class="orange-ball-signin">\n            <div class="login-form-signin">\n                <input type="text" id="username" placeholder="nom d\'utilisateur">\n                <input type="email" id="email" placeholder="email">\n                <input type="password" id="password" placeholder="mot de passe">\n                <input type="password" id="confirmPassword" placeholder="confirmer mot de passe">\n                <button type="submit" class="button-signin">s\'inscrire</button>\n            </div>\n        </div>\n    </div>\n\n    <div class="balls-signin d-lg-none d-sm-flex">\n        <div class="orange-ball-sm-signin">\n            <div class="login-form-signin">\n                <input type="text" id="username-sm" placeholder="nom d\'utilisateur">\n                <input type="email" id="email-sm" placeholder="email">\n                <input type="password" id="password-sm" placeholder="mot de passe">\n                <input type="password" id="confirmPassword-sm" placeholder="confirmer mot de passe">\n                <button type="submit" class="button-signin">s\'inscrire</button>\n            </div>\n        </div>\n    </div>\n        ',console.log("Section content:",n.innerHTML)):console.error("#section not found in the DOM"),n.addEventListener("submit",(n=>{n.preventDefault();const e={username:document.getElementById("username").value,email:document.getElementById("email").value,password:document.getElementById("password").value,confirmPassword:document.getElementById("confirmPassword").value},t=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.+[a-zA-Z]{2,}$/.test(e.email),s=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^a-zA-Z\d]).{5,}$/.test(e.password);t?s?e.password===e.confirmPassword?a(e):alert("confirmation de mot de passe incorrect"):alert("mot de passe doit contenir au moins 5 caractères, une lettre, un chiffre et un caractère spécial."):alert("email non conforme")}))})();break;case"#/connexion":s();break;case"#/jeu":(()=>{console.log("Game component loaded");let n=document.querySelector("#section");n?(n.innerHTML='   <div class="frame-game">\n            <h1 class="title-game">Jeu du pong</h1>\n            <span class="close-btn-game">&times;</span>\n        </div>\n    ',console.log("Section content:",n.innerHTML)):console.error("#section not found in the DOM")})();break;case"#/dashboard":o();break;case"#/leaderboard":i();break;case"#/settings":l();break;case"#/aboutus":(()=>{console.log("Game component loaded");let n=document.querySelector("#section");n?(n.innerHTML="\n        <h1>About Us</h1>\n    ",console.log("Section content:",n.innerHTML)):console.error("#section not found in the DOM")})();break;default:e.innerHTML="<h1>Page not found</h1>"}else console.error("#section not found in the DOM")})()):console.error("#root not found in the DOM")};document.addEventListener("DOMContentLoaded",r),window.addEventListener("hashchange",r)})();