(()=>{"use strict";const e=()=>{let e=document.createElement("form");e.innerHTML='\n        <h1>CONNNNNNNEXION</h1>\n        <div class="mb-3">\n            <label for="username" class="form-label">Nom d\'utilisateur</label>\n            <input type="text" class="form-control" id="username" required>\n        </div>\n        <div class="mb-3">\n            <label for="password" class="form-label">Mot de passe</label>\n            <input type="password" class="form-control" id="password" required>\n        </div>\n        <button type="submit" class="btn btn-primary">Se connecter</button>\n        <button onclick="window.location=\'http://localhost:8000/api/42login\';">Connexion avec 42</button>\n    ',document.querySelector("#section").innerHTML="",document.querySelector("#section").append(e),e.addEventListener("submit",(e=>{e.preventDefault();const n={username:document.getElementById("username").value,password:document.getElementById("password").value};var t;t=n,fetch("http://localhost:8000/api/signin/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>{if(!e.ok)throw new Error("Erreur de connexion");return e.json()})).then((e=>{console.log("Réponse du backend:",e),window.location.href="/home"})).catch((e=>{console.error("Erreur:",e),alert("Nom d utilisateur ou mot de passe incorrect")}))}))},n=e=>{fetch("http://localhost:8000/api/register/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.ok?e.json():e.json().then((e=>{throw new Error(e)})))).then((e=>{alert("User created successfully."),window.location.href="/myprofile"})).catch((e=>{alert("User creation failed."),console.error("Error:",e)}))},t=()=>{let t=document.querySelector("#root");t.innerHTML="",t.append((()=>{let e=document.createElement("nav");return e.innerHTML='\n    \n        <a href="#/">Home</a>\n        <a href="#/inscription">Inscription</a>\n        <a href="#/connexion">Connexion</a>\n    ',e})()),t.append((()=>{let e=document.createElement("input");return e.id="buscador",e.style.display="none",e})()),t.append((()=>{let e=document.createElement("main");return e.id="section",e})()),(()=>{let{hash:t}=location;switch(t){case"#/":return(()=>{let e=document.createElement("div");e.innerHTML='<div class="container-fluid">\n        <div class="balls d-none d-sm-flex">\n            <div class="orange-ball">\n                <a href="../inscription-page/Inscription.html">Inscription</a>\n            </div>\n            <div class="white-ball">\n                <a href="../connexion-page/Connexion.html">Connexion</a>\n            </div>\n            <div class="btn-container">\n                <button onclick="window.location=\'https://42.fr/\';" class="btn-42">\n                    <p class="co-42">connexion avec</p>\n                    <img src="../images/42.png" class="img-42" alt="button-42">\n                </button>\n            </div>\n        </div>\n\n    </div>\n',document.querySelector("#section").innerHTML="",document.querySelector("#section").append(e)})();case"#/inscription":return(()=>{let e=document.createElement("form");e.innerHTML='\n            <h1>INSCRIPTION</h1>\n            <div class="mb-3">\n                <label for="username" class="form-label">Nom d\'utilisateur</label>\n                <input type="text" class="form-control" id="username" required>\n            </div>\n            <div class="mb-3">\n                <label for="email" class="form-label">Email</label>\n                <input type="email" class="form-control" id="email" required>\n            </div>\n            <div class="mb-3">\n                <label for="password" class="form-label">Mot de passe</label>\n                <input type="password" class="form-control" id="password" required>\n            </div>\n            <div class="mb-3">\n                <label for="confirmPassword" class="form-label">Confirmation de mot de passe</label>\n                <input type="password" class="form-control" id="confirmPassword" required>\n            </div>\n            <button type="submit" class="btn btn-primary">S\'inscrire</button>\n        ',e.addEventListener("submit",(e=>{e.preventDefault();const t={username:document.getElementById("username").value,email:document.getElementById("email").value,password:document.getElementById("password").value,confirmPassword:document.getElementById("confirmPassword").value},o=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.+[a-zA-Z]{2,}$/.test(t.email),r=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^a-zA-Z\d]).{5,}$/.test(t.password);o?r?t.password===t.confirmPassword?n(t):alert("confirmation de mot de passe incorrect"):alert("mot de passe doit contenir au moins 5 caractères, une lettre, un chiffre et un caractère spécial."):alert("email non conforme")})),document.querySelector("#section").innerHTML="",document.querySelector("#section").append(e)})();case"#/connexion":return e();case"#/myprofile":(()=>{let e=document.createElement("div");e.innerHTML="<h1>My Profile</h1>",document.querySelector("#section").innerHTML="",document.querySelector("#section").append(e)})()}})()};document.addEventListener("DOMContentLoaded",t),window.addEventListener("hashchange",t)})();