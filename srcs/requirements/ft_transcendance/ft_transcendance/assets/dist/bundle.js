(()=>{"use strict";const e=()=>{let e=document.createElement("form");e.innerHTML='\n        <h1>CONNEXION</h1>\n        <div class="mb-3">\n            <label for="username" class="form-label">Nom d\'utilisateur</label>\n            <input type="text" class="form-control" id="username" required>\n        </div>\n        <div class="mb-3">\n            <label for="password" class="form-label">Mot de passe</label>\n            <input type="password" class="form-control" id="password" required>\n        </div>\n        <button type="submit" class="btn btn-primary">Se connecter</button>\n    ',document.querySelector("#section").innerHTML="",document.querySelector("#section").append(e),e.addEventListener("submit",(e=>{e.preventDefault();const n={username:document.getElementById("username").value,password:document.getElementById("password").value};var t;t=n,fetch("http://localhost:8000/register/",{method:"POST",body:JSON.stringify(t)}).then((e=>{if(!e.ok)throw new Error("Erreur de connexion");return e.json()})).then((e=>{console.log("Réponse du backend:",e),window.location.href="/connected"})).catch((e=>{console.error("Erreur:",e),alert("Nom d utilisateur ou mot de passe incorrect")}))}))},n=e=>{fetch("http://localhost:8000/register/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.ok?e.json():e.json().then((e=>{throw new Error(e)})))).then((e=>{alert("User created successfully."),window.location.href="/succes/"})).catch((e=>{alert("User creation failed."),console.error("Error:",e)}))},t=()=>{let t=document.querySelector("#root");t.innerHTML="",t.append((()=>{let e=document.createElement("nav");return e.innerHTML='\n    \n        <a href="#/">Home</a>\n        <a href="#/inscription">Inscription</a>\n        <a href="#/connexion">Connexion</a>\n    ',e})()),t.append((()=>{let e=document.createElement("input");return e.id="buscador",e.style.display="none",e})()),t.append((()=>{let e=document.createElement("main");return e.id="section",e})()),(()=>{let{hash:t}=location;switch(t){case"#/":return(()=>{let e=document.createElement("div");e.innerHTML="<h1>Bienvenue sur Pong</h1>",document.querySelector("#section").innerHTML="",document.querySelector("#section").append(e)})();case"#/inscription":return(()=>{let e=document.createElement("form");e.innerHTML='\n            <h1>INSCRIPTION</h1>\n            <div class="mb-3">\n                <label for="username" class="form-label">Nom d\'utilisateur</label>\n                <input type="text" class="form-control" id="username" required>\n            </div>\n            <div class="mb-3">\n                <label for="email" class="form-label">Email</label>\n                <input type="email" class="form-control" id="email" required>\n            </div>\n            <div class="mb-3">\n                <label for="password" class="form-label">Mot de passe</label>\n                <input type="password" class="form-control" id="password" required>\n            </div>\n            <div class="mb-3">\n                <label for="confirmPassword" class="form-label">Confirmation de mot de passe</label>\n                <input type="password" class="form-control" id="confirmPassword" required>\n            </div>\n            <button type="submit" class="btn btn-primary">S\'inscrire</button>\n        ',e.addEventListener("submit",(e=>{e.preventDefault();const t={username:document.getElementById("username").value,email:document.getElementById("email").value,password:document.getElementById("password").value,confirmPassword:document.getElementById("confirmPassword").value},r=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.+[a-zA-Z]{2,}$/.test(t.email),o=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^a-zA-Z\d]).{5,}$/.test(t.password);r?o?t.password===t.confirmPassword?n(t):alert("confirmation de mot de passe incorrect"):alert("mot de passe doit contenir au moins 5 caractères, une lettre, un chiffre et un caractère spécial."):alert("email non conforme")})),document.querySelector("#section").innerHTML="",document.querySelector("#section").append(e)})();case"#/connexion":return e();case"#/succes":return(()=>{let e=document.createElement("div");e.innerHTML="<h1>Inscription réussie</h1>",document.querySelector("#section").innerHTML="",document.querySelector("#section").append(e)})();case"#/connected":(()=>{let e=document.createElement("div");e.innerHTML="<h1>Vous êtes connectés</h1>",document.querySelector("#section").innerHTML="",document.querySelector("#section").append(e)})()}})()};document.addEventListener("DOMContentLoaded",t),window.addEventListener("hashchange",t)})();